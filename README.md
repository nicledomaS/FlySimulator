# FlySimulator
Программа моделирующая поведение мух в замкнутом пространстве.

Cимулятор полета мух состоит из двух частей: 
* Полётное ядро
* Пользовательский интерфейс

Полётное ядро
Написано на  С++, stl и состоит из следующих классов: 
* FlySimulator
	Управляет моделью поведения мух. Добовляет новые потоки, создает мух, настраивает свойства модели. 
	Хранит в себе список добавленных мух, список потоков в котором живут мухи и поле по которому передвигаются мухи.
	Добавляя новую муху, создается новый поток в который передается муха, алгоритм жизни мухи и поле по которому она передвигается.
	Метод stop позволяет немедленно дать сигнал об остановке всех потоков.
	
* Fly
	Выполняет расчет движения, расчет телеметрии. Хранит в себе текущие координаты, врожденную тупость и телеметрию.
	
* Area
	Поле по которому передвигается муха. Поле состоит из ячеек в котором указано общее количество мух и колличество мертвых мух.
	Ячейки расположены в ассоциативном контейнере, ключ которого является составное 32-разрядное число из 2 16-разрядных координат X,Y (см. createKey).
	Передвижение мухи по полю есть по сути изменение числа владельцев ячейки. Когда муха создана она пытается приземлиться с произвольными координатами на поле.
	Если у нее это удается в отдельном потоке запускается алгаритм жизни. Вначале муха пытается переместиться по проивольным координатам 
	в соседнюю ячейку (см. goIn), если резултат положительный то она освобождает ранее занимаемую ячеку(goOut). 
	Для атомарного изменения ячеек используется мьютекс. Когда муха умирает вызывается метод die, который фиксирует колличество мертвых мух в ячейке.
	Получить колличество всех мух и мертвых предоставляет метод population.
	

Пользовательский интерфейс
Сделан на Qt, состоит из следующих элементов:
* Элементов управления
	QSlider - задает параметры симуляции(размер, емкость, тупость).
	QButtonPush - кнопки управления(добавить новую муху, запустить/остановить симуляцию).
* Элементы отображения
	QSpinBox - отображение параметров симуляции.
	QTableView - таблица на которой можно увидеть сколько мух в ячейках.
	
MainWindow - класс клавного окна, содержит в себе обработчики GUI.
	Хранит в себе модель отображения данных(MatrixModel) и симулятор мух. 

MatrixModel - редставляет из себя паттерн MVC. Получает данные от симулятора мух о популяции мух на поле и отображает ее в QTableView.

Renderer 

Statistics - выводит в новом окне статистику по мухам.

Использование
1) Запустить приложение.
2) Настроить параметры "Размер", "Емкость", "Тупость" используя ползунки.
3) Нажать кнопку "Запуск" для выполнения симуляции.
3.1) Если необходимо нажать сколько потребуется кнопку "Добавить" для добавления новых мух.
4) Нажать кнопку "Стоп" чтобы остановить симуляцию.
5) Закрыть лог.
6) Выйти из программы или повторить все с пункта 2.